import{m as u,j as H,q as K,g as a,o,a as L,d as Q,h as W,w as q,b as e,i as c,k as p,C as k,D as F,t as d,F as M,E as O,n as h,e as X,G as Y,H as w}from"./app-DNKGMIpD.js";import{_ as Z}from"./AuthenticatedLayout-CxzTPp9d.js";import"./ApplicationLogo-Bf8uzHen.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"flex justify-between items-center"},te={class:"flex space-x-2"},se={class:"py-12"},re={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ae={class:"mb-6 overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},oe={class:"p-6"},le={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},de={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},ne={class:"p-6"},ie={key:0,class:"text-center py-8"},ue={key:1,class:"text-center py-8"},ce={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},ge={key:2,class:"space-y-4"},me={class:"flex items-start justify-between"},pe={class:"flex-1"},be={class:"flex items-center space-x-2"},xe=["onClick"],fe={key:0,class:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},ve={key:1,class:"w-5 h-5 text-gray-400 hover:text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ye={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400"},ke={key:0},he={key:1},we={class:"flex items-center space-x-2 ml-4"},_e=["onClick"],Ce=["onClick"],Me={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Te={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},je={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full dark:bg-gray-800"},Ve={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 dark:bg-gray-800"},Be={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},Se={class:"space-y-4"},Ue={key:0},ze=["value"],Ee={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse dark:bg-gray-700"},$e={type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"},Le={__name:"Index",props:{users:Array,tasks:Object,filters:Object,currentUser:Object},setup(T){var V,B,S,U,z,E,$;const n=T,f=u(((V=n.tasks)==null?void 0:V.data)||[]),v=u(!1),_=u(!1),g=u(null),y=u(n.currentUser||{}),G=u({current_page:((B=n.tasks)==null?void 0:B.current_page)||1,last_page:((S=n.tasks)==null?void 0:S.last_page)||1,per_page:((U=n.tasks)==null?void 0:U.per_page)||10,total:((z=n.tasks)==null?void 0:z.total)||0}),i=u({search:((E=n.filters)==null?void 0:E.search)||"",status:(($=n.filters)==null?void 0:$.status)||"all"}),l=u({title:"",description:"",due_date:"",user_id:""}),m=H(()=>{var r;return((r=y.value)==null?void 0:r.role)==="admin"});H(()=>f.value||[]);const b=async()=>{v.value=!0;try{const r={};i.value.status!=="all"&&(r.status=i.value.status),i.value.search&&(r.search=i.value.search),Y.get("/tasks",r,{preserveState:!0,onSuccess:t=>{var s,x,D,N,A;f.value=((s=t.props.tasks)==null?void 0:s.data)||[],G.value={current_page:((x=t.props.tasks)==null?void 0:x.current_page)||1,last_page:((D=t.props.tasks)==null?void 0:D.last_page)||1,per_page:((N=t.props.tasks)==null?void 0:N.per_page)||10,total:((A=t.props.tasks)==null?void 0:A.total)||0}},onFinish:()=>{v.value=!1}})}catch(r){console.error("Erro ao carregar tarefas:",r),v.value=!1}},j=(r=null)=>{g.value=r,r?l.value={...r}:l.value={title:"",description:"",due_date:"",user_id:m.value?"":y.value.id},_.value=!0},C=()=>{_.value=!1,g.value=null,l.value={title:"",description:"",due_date:"",user_id:""}},I=async()=>{try{g.value?await w.put(`/api/tasks/${g.value.id}`,l.value):await w.post("/api/tasks",l.value),C(),b()}catch(r){console.error("Erro ao salvar tarefa:",r)}},P=async r=>{try{await w.patch(`/api/tasks/${r.id}/toggle`),b()}catch(t){console.error("Erro ao alterar status da tarefa:",t)}},R=async r=>{if(confirm("Tem certeza que deseja excluir esta tarefa?"))try{await w.delete(`/api/tasks/${r.id}`),b()}catch(t){console.error("Erro ao excluir tarefa:",t)}},J=()=>{window.open("/api/tasks/export/csv","_blank")};return K(()=>{}),(r,t)=>(o(),a(M,null,[L(Q(W),{title:"Tarefas"}),L(Z,null,{header:q(()=>[e("div",ee,[t[7]||(t[7]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Gerenciar Tarefas ",-1)),e("div",te,[e("button",{onClick:J,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Exportar CSV "),m.value?(o(),a("button",{key:0,onClick:t[0]||(t[0]=s=>j()),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Nova Tarefa ")):c("",!0)])])]),default:q(()=>[e("div",se,[e("div",re,[e("div",ae,[e("div",oe,[e("div",le,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Buscar ",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value.search=s),onInput:b,type:"text",placeholder:"Buscar por tÃ­tulo ou descriÃ§Ã£o...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,544),[[k,i.value.search]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Status ",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value.status=s),onChange:b,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},t[9]||(t[9]=[e("option",{value:"all"},"Todas",-1),e("option",{value:"pending"},"Pendentes",-1),e("option",{value:"completed"},"ConcluÃ­das",-1)]),544),[[F,i.value.status]])])])])]),e("div",de,[e("div",ne,[v.value?(o(),a("div",ie,t[11]||(t[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Carregando tarefas...",-1)]))):f.value.length===0?(o(),a("div",ue,[t[12]||(t[12]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),t[13]||(t[13]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"Nenhuma tarefa encontrada",-1)),e("p",ce,d(m.value?"Comece criando uma nova tarefa.":"NÃ£o hÃ¡ tarefas atribuÃ­das a vocÃª."),1)])):(o(),a("div",ge,[(o(!0),a(M,null,O(f.value,s=>(o(),a("div",{key:s.id,class:h(["border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow dark:border-gray-600",{"opacity-60":s.completed}])},[e("div",me,[e("div",pe,[e("div",be,[e("button",{onClick:x=>P(s),class:"flex-shrink-0"},[s.completed?(o(),a("svg",fe,t[14]||(t[14]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):(o(),a("svg",ve,t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],8,xe),e("h3",{class:h(["text-lg font-medium text-gray-900 dark:text-gray-100",{"line-through":s.completed}])},d(s.title),3)]),s.description?(o(),a("p",{key:0,class:h(["mt-1 text-sm text-gray-600 dark:text-gray-400",{"line-through":s.completed}])},d(s.description),3)):c("",!0),e("div",ye,[s.due_date?(o(),a("span",ke," ðŸ“… "+d(new Date(s.due_date).toLocaleDateString("pt-BR")),1)):c("",!0),s.user?(o(),a("span",he," ðŸ‘¤ "+d(s.user.name),1)):c("",!0),e("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.completed?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"])},d(s.completed?"ConcluÃ­da":"Pendente"),3)])]),e("div",we,[m.value||s.user&&s.user.id===y.value.id?(o(),a("button",{key:0,onClick:x=>j(s),class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"},t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,_e)):c("",!0),m.value||s.user&&s.user.id===y.value.id?(o(),a("button",{key:1,onClick:x=>R(s),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},t[17]||(t[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ce)):c("",!0)])])],2))),128))]))])])])]),_.value?(o(),a("div",Me,[e("div",Te,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:C}),e("div",je,[e("form",{onSubmit:X(I,["prevent"])},[e("div",Ve,[e("h3",Be,d(g.value?"Editar Tarefa":"Nova Tarefa"),1),e("div",Se,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," TÃ­tulo * ",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.title=s),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[k,l.value.title]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," DescriÃ§Ã£o ",-1)),p(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.description=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[k,l.value.description]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Data de Vencimento ",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.due_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[k,l.value.due_date]])]),m.value?(o(),a("div",Ue,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Atribuir a * ",-1)),p(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.user_id=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[t[21]||(t[21]=e("option",{value:""},"Selecione um usuÃ¡rio",-1)),(o(!0),a(M,null,O(T.users,s=>(o(),a("option",{key:s.id,value:s.id},d(s.name)+" ("+d(s.email)+") ",9,ze))),128))],512),[[F,l.value.user_id]])])):c("",!0)])]),e("div",Ee,[e("button",$e,d(g.value?"Atualizar":"Criar"),1),e("button",{type:"button",onClick:C,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-600 dark:text-gray-300 dark:border-gray-500 dark:hover:bg-gray-700"}," Cancelar ")])],32)])])])):c("",!0)]),_:1})],64))}};export{Le as default};
